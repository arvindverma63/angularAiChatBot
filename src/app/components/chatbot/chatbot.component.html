<style>
  /* Custom CSS for enhanced UI */
  .chat-container {
    transition: all 0.3s ease-in-out;
  }

  .message-bubble {
    animation: slideIn 0.3s ease-out;
    position: relative;
  }

  .message-bubble::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 1rem;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
    pointer-events: none;
  }

  .voice-button.active {
    box-shadow: 0 0 15px rgba(99, 102, 241, 0.7), 0 0 30px rgba(99, 102, 241, 0.3);
  }

  .send-button:hover {
    transform: scale(1.05);
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @media (max-width: 640px) {
    .chat-container {
      max-width: 100%;
      margin: 0;
      border-radius: 0;
      border: none;
      height: 100vh;
    }

    .chat-header {
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .message-bubble {
      max-width: 80%;
    }

    .chat-header h1 {
      font-size: 1.125rem;
    }

    .chat-header p {
      font-size: 0.675rem;
    }

    .input-area input {
      font-size: 0.875rem;
    }

    .chat-messages {
      flex: 1;
      height: calc(100vh - 120px - 80px);
      /* Adjust for header and input heights */
    }
  }
</style>

<div
  class="chat-container w-full max-w-3xl mx-auto bg-gray-900/90 backdrop-blur-xl rounded-3xl shadow-2xl overflow-hidden border border-gray-700/50 sm:my-6 flex flex-col min-h-screen sm:min-h-0">
  <!-- Chat Header -->
  <div
    class="chat-header bg-gradient-to-r from-indigo-700 via-purple-600 to-pink-500 p-3 sm:p-6 flex items-center justify-between">
    <div class="flex items-center space-x-2 sm:space-x-3">
      <div class="w-8 h-8 sm:w-12 sm:h-12 bg-white/10 rounded-full flex items-center justify-center">
        <svg class="w-4 h-4 sm:w-6 sm:h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z">
          </path>
        </svg>
      </div>
      <div>
        <h1 class="text-base sm:text-xl font-bold text-white">Voice AI Assistant</h1>
        <p class="text-[10px] sm:text-sm text-indigo-200">by Avyuktcore Technologies</p>
      </div>
    </div>
    <span class="text-[10px] sm:text-xs text-indigo-100 animate-pulse">‚óè <span class="text-white font-semibold">Voice
        Mode</span></span>
  </div>

  <!-- Chat Messages -->
  <div
    class="chat-messages flex-1 overflow-y-auto p-3 sm:p-6 space-y-4 bg-gradient-to-b from-gray-900/80 to-gray-800/80"
    #chatContainer>
    <div *ngFor="let message of messages" [ngClass]="message.isUser ? 'flex justify-end' : 'flex justify-start'">
      <div
        class="message-bubble relative max-w-[70%] sm:max-w-md p-2 sm:p-4 rounded-xl shadow-lg transition-all duration-300"
        [ngClass]="message.isUser ? 'bg-indigo-600 text-white' : 'bg-gray-700/80 text-gray-100'">
        <p class="text-xs sm:text-base">{{ message.text }}</p>
        <div
          class="absolute -top-2 -right-2 w-4 h-4 sm:w-6 sm:h-6 bg-red-500 rounded-full flex items-center justify-center text-xs text-white"
          *ngIf="message.isUser">
          <svg class="w-2 h-2 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z">
            </path>
          </svg>
        </div>
      </div>
    </div>
    <div #messagesEnd></div>
  </div>

  <!-- Input Area -->
  <div class="input-area p-3 sm:p-6 bg-gray-900/70 border-t border-gray-700/50">
    <div class="flex items-center space-x-2 sm:space-x-4">
      <button (click)="toggleVoice()"
        class="voice-button p-2 sm:p-3 bg-indigo-600 rounded-full hover:bg-indigo-700 transition duration-300"
        [ngClass]="isListening ? 'active' : ''">
        <svg class="w-4 h-4 sm:w-6 sm:h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg" [ngClass]="isListening ? 'animate-pulse' : ''">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z">
          </path>
        </svg>
      </button>
      <input [(ngModel)]="input" (keyup.enter)="sendMessage()" type="text" placeholder="Speak or type your message..."
        class="flex-1 p-2 sm:p-3 bg-gray-800/80 text-white border border-gray-600/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 text-xs sm:text-base">
      <button (click)="sendMessage()"
        class="send-button p-2 sm:p-3 bg-indigo-600 rounded-lg hover:bg-indigo-700 transition duration-300">
        <svg class="w-4 h-4 sm:w-6 sm:h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8">
          </path>
        </svg>
      </button>
    </div>
    <p class="text-[10px] sm:text-xs text-gray-400 mt-2 text-center">Tap the mic to start/stop voice input</p>
  </div>
</div>
